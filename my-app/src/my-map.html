<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/geo-location/geo-location.html">
<link rel="import" href="../bower_components/google-map/google-map.html">
<link rel="import" href="../bower_components/google-map/google-map-marker.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="my-icons.html">


<dom-module id="my-map">
    <template>
        <style include="shared-styles">
            :host {
                display: block;

                padding: 10px;
            }

            app-header {
                color: rgb(255, 255, 255);
                background-color: #673AB7;
            }

            paper-icon-button.menu {
                margin-right: 16px;
            }
        </style>


        <app-header-layout fullbleed has-scrolling-region>
            <app-header fixed slot="header">
                <app-toolbar primary>
                    <paper-icon-button class="menu" icon="my-icons:menu" drawer-toggle on-tap="toggleDrawer"></paper-icon-button>
                    <div main-title>My Map</div>
                </app-toolbar>
            </app-header>

            <div class="card">
                <geo-location watch-pos high-accuracy latitude="{{latitude}}" longitude="{{longitude}}"></geo-location>

                <!-- TODO: change the API key to your own. AIzaSyA1Q07t9pb6eWgtPeQe-EhRiGni7D-sbp0-->
                <google-map latitude="[[latitude]]" longitude="[[longitude]]" api-key="AIzaSyCV24k2Ev083HFXiASIj9g7RhvUi7C9J3w"></google-map>
                    <google-map-marker slot="markers" latitude="[[latitude]]" longitude="[[longitude]]"></google-map-marker>
                </google-map>
            </div>

        </app-header-layout>

    </template>

    <script>
        class MyMap extends Polymer.Element {
            static get is() { return 'my-map'; }

            static get properties() {
                return {
                    narrow: {
                        type: Boolean,
                        notify: true
                    }
                };
            }

            toggleDrawer() {
                this.dispatchEvent(new CustomEvent('toggleDrawer', {
                    bubbles: true, composed: true, detail: {
                        narrow: this.$.narrow
                    }
                }));
                this.$.narrow = !this.$.narrow;
            }
        }

        window.customElements.define(MyMap.is, MyMap);
    </script>
</dom-module>